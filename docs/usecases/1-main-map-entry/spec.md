# Use Case: ë©”ì¸ ì§€ë„ í™”ë©´ ì§„ì…

## ê°œìš”

### Use Case ID
UC-001

### Use Case ëª…
ë©”ì¸ ì§€ë„ í™”ë©´ ì§„ì…

### ì„¤ëª…
ì‚¬ìš©ìê°€ ConnectMap ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì²˜ìŒ ì ‘ì†í•  ë•Œ ë„¤ì´ë²„ ì§€ë„ ê¸°ë°˜ì˜ ë©”ì¸ í™”ë©´ì„ í‘œì‹œí•˜ê³ , ì‚¬ìš©ìì˜ í˜„ì¬ ìœ„ì¹˜ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ì§€ë„ë¥¼ ì´ˆê¸°í™”í•˜ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤.

### ì•¡í„°
- **Primary Actor**: ì¼ë°˜ ì‚¬ìš©ì (ë§›ì§‘ íƒìƒ‰ì, ë¦¬ë·° ì‘ì„±ì, ì§€ì—­ ì£¼ë¯¼)
- **Secondary Actor**: ë„¤ì´ë²„ ë§µìŠ¤ API, ë¸Œë¼ìš°ì € GPS API

### ì„ í–‰ ì¡°ê±´ (Preconditions)
- ì‚¬ìš©ìê°€ ì¸í„°ë„·ì— ì—°ê²°ë˜ì–´ ìˆìŒ
- ë¸Œë¼ìš°ì €ê°€ ì§€ì›ë˜ëŠ” í™˜ê²½ (Chrome, Safari, Firefox, Edge ìµœì‹  2ê°œ ë²„ì „)
- ë„¤ì´ë²„ ë§µìŠ¤ API í‚¤ê°€ ìœ íš¨í•¨

### í›„í–‰ ì¡°ê±´ (Postconditions)
- ë©”ì¸ ì§€ë„ í™”ë©´ì´ ì„±ê³µì ìœ¼ë¡œ ë Œë”ë§ë¨
- ì§€ë„ ì¤‘ì‹¬ì´ ì‚¬ìš©ì ìœ„ì¹˜ ë˜ëŠ” ê¸°ë³¸ ìœ„ì¹˜ë¡œ ì„¤ì •ë¨
- ê²€ìƒ‰ UIê°€ í‘œì‹œë˜ì–´ ë‹¤ìŒ ì•¡ì…˜ ì¤€ë¹„ ì™„ë£Œ

---

## ë©”ì¸ í”Œë¡œìš° (Main Flow)

### Step 1: ì• í”Œë¦¬ì¼€ì´ì…˜ ì ‘ì†
**Actor**: ì‚¬ìš©ì
**Action**: ì‚¬ìš©ìê°€ ConnectMap ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ URLì— ì ‘ì†
**System**: Next.js ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™” ë° ë©”ì¸ í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ ì‹œì‘

### Step 2: í˜ì´ì§€ ì´ˆê¸°í™”
**System**:
1. ë©”ì¸ í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸
2. ì„œë¹„ìŠ¤ ë¡œê³ /íƒ€ì´í‹€ ë Œë”ë§
3. ê²€ìƒ‰ UI ì»´í¬ë„ŒíŠ¸ ì¤€ë¹„ (ë¹„í™œì„± ìƒíƒœ)

### Step 3: ë„¤ì´ë²„ ì§€ë„ SDK ë¡œë“œ
**System**:
1. ë„¤ì´ë²„ ë§µìŠ¤ JavaScript SDK ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ (CDN)
2. SDK ì´ˆê¸°í™” ì™„ë£Œ ëŒ€ê¸°
3. ì§€ë„ ì»¨í…Œì´ë„ˆ DOM ìš”ì†Œ ì¤€ë¹„

**Output**:
- ë„¤ì´ë²„ ì§€ë„ SDK ë¡œë“œ ì™„ë£Œ ì´ë²¤íŠ¸ ë°œìƒ

### Step 4: ìœ„ì¹˜ ê¶Œí•œ ìš”ì²­
**System**: ë¸Œë¼ìš°ì € Geolocation APIë¥¼ í†µí•´ ì‚¬ìš©ì ìœ„ì¹˜ ê¶Œí•œ ìš”ì²­
**Browser**: ìœ„ì¹˜ ê¶Œí•œ ìš”ì²­ íŒì—… í‘œì‹œ

**Popup Message**:
```
"ConnectMap"ì´(ê°€) ì‚¬ìš©ìì˜ ìœ„ì¹˜ì— ì•¡ì„¸ìŠ¤í•˜ë ¤ê³  í•©ë‹ˆë‹¤.
[ê±°ë¶€] [í—ˆìš©]
```

**Actor**: ì‚¬ìš©ì
**Action**: ìœ„ì¹˜ ê¶Œí•œ í—ˆìš© ë˜ëŠ” ê±°ë¶€ ì„ íƒ

### Step 5A: ìœ„ì¹˜ ê¶Œí•œ í—ˆìš© ì‹œ
**Actor**: ì‚¬ìš©ìê°€ "í—ˆìš©" ì„ íƒ
**System**:
1. GPS APIë¥¼ í†µí•´ í˜„ì¬ ìœ„ì¹˜ ì¢Œí‘œ íšë“ (ìœ„ë„, ê²½ë„)
2. íšë“í•œ ì¢Œí‘œë¥¼ ì§€ë„ ì¤‘ì‹¬ì ìœ¼ë¡œ ì„¤ì •
3. ì¤Œ ë ˆë²¨ ì„¤ì • (ê¸°ë³¸ê°’: 15)

**Data**:
```typescript
{
  latitude: number,  // ì˜ˆ: 37.5665
  longitude: number, // ì˜ˆ: 126.9780
  accuracy: number   // ì •í™•ë„ (ë¯¸í„°)
}
```

**Proceed to**: Step 6

### Step 5B: ìœ„ì¹˜ ê¶Œí•œ ê±°ë¶€ ì‹œ
**Actor**: ì‚¬ìš©ìê°€ "ê±°ë¶€" ì„ íƒ ë˜ëŠ” ê¶Œí•œ ìš”ì²­ ë¬´ì‹œ
**System**:
1. ê¸°ë³¸ ì¤‘ì‹¬ ì¢Œí‘œ ì‚¬ìš© (ì„œìš¸ì‹œì²­ ì¢Œí‘œ)
2. ê¸°ë³¸ ì¢Œí‘œë¡œ ì§€ë„ ì¤‘ì‹¬ ì„¤ì •
3. ì¤Œ ë ˆë²¨ ì„¤ì • (ê¸°ë³¸ê°’: 12)

**Default Coordinates**:
```typescript
{
  latitude: 37.5665,   // ì„œìš¸ì‹œì²­
  longitude: 126.9780,
  zoom: 12
}
```

**Proceed to**: Step 6

### Step 6: ì§€ë„ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
**System**:
1. ë„¤ì´ë²„ ì§€ë„ APIë¥¼ ì‚¬ìš©í•˜ì—¬ ì§€ë„ ê°ì²´ ìƒì„±
2. ì¤‘ì‹¬ ì¢Œí‘œ ë° ì¤Œ ë ˆë²¨ ì„¤ì •
3. ì§€ë„ ì»¨íŠ¸ë¡¤ ì¶”ê°€ (ì¤Œ ì»¨íŠ¸ë¡¤, ì§€ë„ ìœ í˜• ì»¨íŠ¸ë¡¤ ë“±)
4. í˜„ì¬ ìœ„ì¹˜ ë²„íŠ¼ ë Œë”ë§ (ì§€ë„ ìš°ì¸¡ í•˜ë‹¨)

**Code Example**:
```typescript
const map = new naver.maps.Map('map-container', {
  center: new naver.maps.LatLng(latitude, longitude),
  zoom: zoomLevel,
  zoomControl: true,
  mapTypeControl: true,
});
```

### Step 7: UI ì»´í¬ë„ŒíŠ¸ í™œì„±í™”
**System**:
1. ê²€ìƒ‰ì°½ í™œì„±í™” (ì…ë ¥ ê°€ëŠ¥ ìƒíƒœë¡œ ë³€ê²½)
2. ê²€ìƒ‰ì°½ì— í”Œë ˆì´ìŠ¤í™€ë” í…ìŠ¤íŠ¸ í‘œì‹œ: "ì¥ì†Œë‚˜ ë§›ì§‘ì„ ê²€ìƒ‰í•˜ì„¸ìš”"
3. í˜„ì¬ ìœ„ì¹˜ ë²„íŠ¼ í™œì„±í™”

### Step 8: ì´ˆê¸° ë¡œë”© ì™„ë£Œ
**System**:
1. ë¡œë”© ì¸ë””ì¼€ì´í„° ì œê±° (ìˆëŠ” ê²½ìš°)
2. ì§€ë„ ì¸í„°ë™ì…˜ í™œì„±í™” (ë“œë˜ê·¸, ì¤Œ, í´ë¦­ ì´ë²¤íŠ¸)
3. ì‚¬ìš©ì ì…ë ¥ ëŒ€ê¸° ìƒíƒœ

**Output**:
- ì™„ì „íˆ ìƒí˜¸ì‘ìš© ê°€ëŠ¥í•œ ë©”ì¸ ì§€ë„ í™”ë©´
- ì‚¬ìš©ìì˜ ë‹¤ìŒ ì•¡ì…˜ ì¤€ë¹„ ì™„ë£Œ

---

## ëŒ€ì²´ í”Œë¡œìš° (Alternative Flows)

### Alt 1: ë„¤ì´ë²„ ì§€ë„ SDK ë¡œë“œ ì‹¤íŒ¨
**Trigger**: Step 3ì—ì„œ SDK ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì‹¤íŒ¨ (ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜, ì˜ëª»ëœ API í‚¤ ë“±)

**Flow**:
1. **System**: SDK ë¡œë“œ íƒ€ì„ì•„ì›ƒ ê°ì§€ (10ì´ˆ)
2. **System**: ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
   ```
   ì§€ë„ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
   ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì„ í™•ì¸í•˜ê³  ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.
   [ìƒˆë¡œê³ ì¹¨]
   ```
3. **Actor**: ì‚¬ìš©ìê°€ "ìƒˆë¡œê³ ì¹¨" ë²„íŠ¼ í´ë¦­
4. **System**: í˜ì´ì§€ ì „ì²´ ìƒˆë¡œê³ ì¹¨ (`location.reload()`)
5. **Resume**: Step 1ë¡œ ë³µê·€

**Alternative**:
- 3íšŒ ì—°ì† ì‹¤íŒ¨ ì‹œ: ê´€ë¦¬ì ë¬¸ì˜ ì•ˆë‚´ ë©”ì‹œì§€ í‘œì‹œ

### Alt 2: GPS ì •ë³´ íšë“ íƒ€ì„ì•„ì›ƒ
**Trigger**: Step 5Aì—ì„œ GPS ì¢Œí‘œ íšë“ ì‹œê°„ ì´ˆê³¼ (15ì´ˆ)

**Flow**:
1. **System**: Geolocation API íƒ€ì„ì•„ì›ƒ ê°ì§€
2. **System**: ì½˜ì†” ê²½ê³  ë¡œê·¸ ì¶œë ¥: "GPS timeout, using default location"
3. **System**: Step 5Bë¡œ í´ë°± (ê¸°ë³¸ ì¢Œí‘œ ì‚¬ìš©)
4. **System**: ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼ í† ìŠ¤íŠ¸ í‘œì‹œ (3ì´ˆê°„)
   ```
   í˜„ì¬ ìœ„ì¹˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ì–´ ê¸°ë³¸ ìœ„ì¹˜ë¡œ í‘œì‹œí•©ë‹ˆë‹¤.
   ```
5. **Resume**: Step 6ë¡œ ì§„í–‰

### Alt 3: ì‚¬ìš©ìê°€ ìœ„ì¹˜ ê¶Œí•œì„ ì´ì „ì— ê±°ë¶€í•œ ê²½ìš°
**Trigger**: Step 4ì—ì„œ ë¸Œë¼ìš°ì €ê°€ ì´ì „ ê±°ë¶€ ê¸°ë¡ì„ í™•ì¸

**Flow**:
1. **System**: ë¸Œë¼ìš°ì € ê¶Œí•œ ìƒíƒœ í™•ì¸ (`navigator.permissions.query`)
2. **System**: ê¶Œí•œì´ "denied" ìƒíƒœì„ì„ ê°ì§€
3. **System**: ê¶Œí•œ ìš”ì²­ íŒì—… ì—†ì´ ì¦‰ì‹œ Step 5Bë¡œ ì´ë™
4. **System**: ì•ˆë‚´ í† ìŠ¤íŠ¸ í‘œì‹œ
   ```
   ìœ„ì¹˜ ê¶Œí•œì´ ì°¨ë‹¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
   ë¸Œë¼ìš°ì € ì„¤ì •ì—ì„œ ìœ„ì¹˜ ê¶Œí•œì„ í—ˆìš©í•´ì£¼ì„¸ìš”.
   ```
5. **Resume**: Step 6ë¡œ ì§„í–‰

### Alt 4: ë„¤íŠ¸ì›Œí¬ ì—°ê²° ì—†ìŒ
**Trigger**: Step 1 ì• í”Œë¦¬ì¼€ì´ì…˜ ì ‘ì† ì‹œ ë„¤íŠ¸ì›Œí¬ ì˜¤í”„ë¼ì¸ ìƒíƒœ

**Flow**:
1. **System**: ë„¤íŠ¸ì›Œí¬ ì—°ê²° ì‹¤íŒ¨ ê°ì§€
2. **System**: ì˜¤í”„ë¼ì¸ ì•ˆë‚´ í™”ë©´ í‘œì‹œ
   ```
   ì¸í„°ë„· ì—°ê²°ì„ í™•ì¸í•´ì£¼ì„¸ìš”.
   ConnectMapì„ ì‚¬ìš©í•˜ë ¤ë©´ ì¸í„°ë„· ì—°ê²°ì´ í•„ìš”í•©ë‹ˆë‹¤.
   [ë‹¤ì‹œ ì‹œë„]
   ```
3. **Actor**: ë„¤íŠ¸ì›Œí¬ ì—°ê²° ë³µêµ¬
4. **Actor**: "ë‹¤ì‹œ ì‹œë„" ë²„íŠ¼ í´ë¦­
5. **System**: ì˜¨ë¼ì¸ ìƒíƒœ í™•ì¸ í›„ ì• í”Œë¦¬ì¼€ì´ì…˜ ì¬ì‹œì‘
6. **Resume**: Step 1ë¡œ ë³µê·€

### Alt 5: ì§€ë„ ì»¨í…Œì´ë„ˆ DOM ìš”ì†Œ ë¯¸ì¡´ì¬
**Trigger**: Step 6ì—ì„œ ì§€ë„ë¥¼ ë Œë”ë§í•  DOM ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ

**Flow**:
1. **System**: DOM ìš”ì†Œ íƒìƒ‰ ì‹¤íŒ¨ ê°ì§€
2. **System**: ì½˜ì†” ì—ëŸ¬ ë¡œê·¸: "Map container not found"
3. **System**: 100ms í›„ ì¬ì‹œë„ (ìµœëŒ€ 5íšŒ)
4. **Success Case**: DOM ì¤€ë¹„ ì™„ë£Œ ì‹œ Step 6 ê³„ì† ì§„í–‰
5. **Failure Case**: 5íšŒ ì¬ì‹œë„ ì‹¤íŒ¨ ì‹œ
   - ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ: "ì§€ë„ë¥¼ í‘œì‹œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”."
   - [ìƒˆë¡œê³ ì¹¨] ë²„íŠ¼ ì œê³µ

---

## ì˜ˆì™¸ í”Œë¡œìš° (Exception Flows)

### Exc 1: ë„¤ì´ë²„ ë§µìŠ¤ API í‚¤ ìœ íš¨í•˜ì§€ ì•ŠìŒ
**Trigger**: Step 3ì—ì„œ API í‚¤ ì¸ì¦ ì‹¤íŒ¨

**Flow**:
1. **System**: ë„¤ì´ë²„ API ì„œë²„ë¡œë¶€í„° 401/403 ì‘ë‹µ ìˆ˜ì‹ 
2. **System**: ê°œë°œììš© ì—ëŸ¬ ë¡œê·¸ ì¶œë ¥
3. **System**: ì‚¬ìš©ììš© ì¼ë°˜ ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
   ```
   ì¼ì‹œì ì¸ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.
   ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.
   ```
4. **System**: ì—ëŸ¬ ë¦¬í¬íŒ… ì„œë¹„ìŠ¤ì— ì—ëŸ¬ ì „ì†¡ (Sentry ë“±)
5. **End**: ì‚¬ìš©ìëŠ” í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ í•„ìš”

### Exc 2: ë¸Œë¼ìš°ì €ê°€ Geolocation APIë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŒ
**Trigger**: Step 4ì—ì„œ `navigator.geolocation`ì´ undefined

**Flow**:
1. **System**: Geolocation API ì§€ì› ì—¬ë¶€ í™•ì¸
2. **System**: ì§€ì›í•˜ì§€ ì•ŠìŒ ê°ì§€
3. **System**: ì½˜ì†” ê²½ê³ : "Geolocation not supported"
4. **System**: Step 5Bë¡œ ì¦‰ì‹œ ì´ë™ (ê¸°ë³¸ ì¢Œí‘œ ì‚¬ìš©)
5. **Resume**: Step 6ë¡œ ì§„í–‰

### Exc 3: ì‚¬ìš©ì GPS ì •í™•ë„ê°€ ë§¤ìš° ë‚®ìŒ (> 5km)
**Trigger**: Step 5Aì—ì„œ íšë“í•œ GPS ì •í™•ë„ê°€ 5000m ì´ˆê³¼

**Flow**:
1. **System**: GPS accuracy ê°’ í™•ì¸
2. **System**: ì •í™•ë„ê°€ ë‚®ë‹¤ê³  íŒë‹¨ (accuracy > 5000)
3. **System**: íšë“í•œ ì¢Œí‘œ ì‚¬ìš©í•˜ë˜ ê²½ê³  í† ìŠ¤íŠ¸ í‘œì‹œ
   ```
   í˜„ì¬ ìœ„ì¹˜ ì •í™•ë„ê°€ ë‚®ìŠµë‹ˆë‹¤.
   ëŒ€ëµì ì¸ ìœ„ì¹˜ë¡œ í‘œì‹œë©ë‹ˆë‹¤.
   ```
4. **System**: ì¤Œ ë ˆë²¨ì„ ë” ë‚®ê²Œ ì„¤ì • (zoom: 10)
5. **Resume**: Step 6ë¡œ ì§„í–‰

---

## ë¹„ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­ (Non-Functional Requirements)

### ì„±ëŠ¥ (Performance)
- **P-1**: ë©”ì¸ í˜ì´ì§€ ì´ˆê¸° ë Œë”ë§ ì™„ë£Œ ì‹œê°„ â‰¤ 2ì´ˆ
- **P-2**: ë„¤ì´ë²„ ì§€ë„ SDK ë¡œë“œ ì™„ë£Œ ì‹œê°„ â‰¤ 3ì´ˆ
- **P-3**: GPS ì¢Œí‘œ íšë“ ì‹œê°„ â‰¤ 5ì´ˆ (íƒ€ì„ì•„ì›ƒ: 15ì´ˆ)
- **P-4**: ì „ì²´ ì´ˆê¸°í™” ì™„ë£Œ (Step 8) ì‹œê°„ â‰¤ 5ì´ˆ

### ì‚¬ìš©ì„± (Usability)
- **U-1**: ìœ„ì¹˜ ê¶Œí•œ ìš”ì²­ ì‹œ ëª…í™•í•œ ì•ˆë‚´ ë©”ì‹œì§€ ì œê³µ
- **U-2**: ë¡œë”© ì¤‘ ìŠ¤í”¼ë„ˆ ë˜ëŠ” ìŠ¤ì¼ˆë ˆí†¤ UI í‘œì‹œ
- **U-3**: ì—ëŸ¬ ë°œìƒ ì‹œ ì‚¬ìš©ì ì¹œí™”ì ì¸ ë©”ì‹œì§€ í‘œì‹œ
- **U-4**: ëª¨ë“  ì¸í„°ë™ì…˜ì— ì‹œê°ì  í”¼ë“œë°± ì œê³µ

### ì ‘ê·¼ì„± (Accessibility)
- **A-1**: ê²€ìƒ‰ì°½ì— ì ì ˆí•œ `aria-label` ì†ì„± ì¶”ê°€
- **A-2**: í˜„ì¬ ìœ„ì¹˜ ë²„íŠ¼ì— í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜ ì§€ì›
- **A-3**: ì—ëŸ¬ ë©”ì‹œì§€ì— `role="alert"` ì†ì„± ì¶”ê°€
- **A-4**: ì§€ë„ ì»¨í…Œì´ë„ˆì— ëŒ€ì²´ í…ìŠ¤íŠ¸ ì œê³µ

### ë³´ì•ˆ (Security)
- **S-1**: ë„¤ì´ë²„ ë§µìŠ¤ API í‚¤ëŠ” í™˜ê²½ ë³€ìˆ˜ë¡œ ê´€ë¦¬
- **S-2**: HTTPS ì—°ê²° í•„ìˆ˜ (GPS API ì‚¬ìš© ì¡°ê±´)
- **S-3**: API í‚¤ëŠ” í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œ ë…¸ì¶œ ê°€ëŠ¥í•˜ë¯€ë¡œ ë„ë©”ì¸ ì œí•œ ì„¤ì •

### í˜¸í™˜ì„± (Compatibility)
- **C-1**: Chrome, Safari, Firefox, Edge ìµœì‹  2ê°œ ë²„ì „ ì§€ì›
- **C-2**: ë°ìŠ¤í¬í†±, íƒœë¸”ë¦¿, ëª¨ë°”ì¼ ë°˜ì‘í˜• ì§€ì›
- **C-3**: iOS Safariì—ì„œ ìœ„ì¹˜ ê¶Œí•œ ìš”ì²­ ì •ìƒ ì‘ë™
- **C-4**: Android Chromeì—ì„œ ìœ„ì¹˜ ê¶Œí•œ ìš”ì²­ ì •ìƒ ì‘ë™

---

## ë°ì´í„° ìš”êµ¬ì‚¬í•­ (Data Requirements)

### ì…ë ¥ ë°ì´í„°
1. **ì‚¬ìš©ì GPS ì¢Œí‘œ** (ì„ íƒì )
   - ìœ„ë„ (latitude): number, -90 ~ 90
   - ê²½ë„ (longitude): number, -180 ~ 180
   - ì •í™•ë„ (accuracy): number, ë¯¸í„° ë‹¨ìœ„

2. **ë„¤ì´ë²„ ë§µìŠ¤ API í‚¤**
   - íƒ€ì…: string
   - ì†ŒìŠ¤: í™˜ê²½ ë³€ìˆ˜ `NEXT_PUBLIC_NAVER_MAP_CLIENT_ID`

### ì¶œë ¥ ë°ì´í„°
1. **ì§€ë„ ìƒíƒœ**
   ```typescript
   {
     center: {
       lat: number,
       lng: number
     },
     zoom: number,
     loaded: boolean
   }
   ```

2. **UI ìƒíƒœ**
   ```typescript
   {
     isLoading: boolean,
     error: string | null,
     locationPermission: 'granted' | 'denied' | 'prompt'
   }
   ```

### ì €ì¥ ë°ì´í„°
- **ë¡œì»¬ ìŠ¤í† ë¦¬ì§€**: ì‚¬ìš©ìê°€ ë§ˆì§€ë§‰ìœ¼ë¡œ ë³¸ ì§€ë„ ì¤‘ì‹¬ ë° ì¤Œ ë ˆë²¨ (ì„ íƒì , í–¥í›„ ê¸°ëŠ¥)
  ```typescript
  {
    lastCenter: { lat: number, lng: number },
    lastZoom: number,
    timestamp: number
  }
  ```

---

## UI/UX ëª…ì„¸ (UI/UX Specifications)

### ë ˆì´ì•„ì›ƒ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [ë¡œê³ ] ConnectMap                    â”‚ <- Header
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ” ì¥ì†Œë‚˜ ë§›ì§‘ì„ ê²€ìƒ‰í•˜ì„¸ìš”    â”‚  â”‚ <- Search Bar (Overlay)
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                      â”‚
â”‚                                      â”‚
â”‚         [ë„¤ì´ë²„ ì§€ë„ ì˜ì—­]            â”‚ <- Map Container
â”‚                                      â”‚
â”‚                                      â”‚
â”‚                                 ğŸ“   â”‚ <- Current Location Button
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì»´í¬ë„ŒíŠ¸ ìƒì„¸

#### 1. Header
- **ë†’ì´**: 60px
- **ë°°ê²½ìƒ‰**: #FFFFFF
- **í…Œë‘ë¦¬**: í•˜ë‹¨ 1px solid #DDDDDD
- **ë¡œê³ **: ì¢Œì¸¡ 16px ì—¬ë°±, í¬ê¸° 120x40px
- **z-index**: 1000

#### 2. Search Bar (Overlay)
- **ìœ„ì¹˜**: ì§€ë„ ìƒë‹¨ ì¤‘ì•™, í—¤ë” ì•„ë˜ 16px
- **í¬ê¸°**: ë„ˆë¹„ 90% (ìµœëŒ€ 600px), ë†’ì´ 48px
- **ë°°ê²½ìƒ‰**: #FFFFFF
- **í…Œë‘ë¦¬**: 1px solid #DDDDDD, border-radius: 24px
- **ê·¸ë¦¼ì**: 0 2px 8px rgba(0,0,0,0.1)
- **z-index**: 100
- **ì•„ì´ì½˜**: ì¢Œì¸¡ ê²€ìƒ‰ ì•„ì´ì½˜ (Lucide Search)
- **í”Œë ˆì´ìŠ¤í™€ë”**: "ì¥ì†Œë‚˜ ë§›ì§‘ì„ ê²€ìƒ‰í•˜ì„¸ìš”" (íšŒìƒ‰, #999999)

#### 3. Map Container
- **í¬ê¸°**: ì „ì²´ í™”ë©´ (í—¤ë” ì œì™¸)
- **ë°°ê²½ìƒ‰**: #F5F5F5 (ì§€ë„ ë¡œë”© ì „)

#### 4. Current Location Button
- **ìœ„ì¹˜**: ì§€ë„ ìš°ì¸¡ í•˜ë‹¨ 16px
- **í¬ê¸°**: 48x48px (ëª¨ë°”ì¼: 40x40px)
- **ë°°ê²½ìƒ‰**: #FFFFFF
- **ì•„ì´ì½˜**: ğŸ“ ë˜ëŠ” Lucide MapPin
- **í…Œë‘ë¦¬**: 1px solid #DDDDDD, border-radius: 50%
- **ê·¸ë¦¼ì**: 0 2px 4px rgba(0,0,0,0.15)
- **hover**: ë°°ê²½ìƒ‰ #F5F5F5
- **active**: ë°°ê²½ìƒ‰ #E0E0E0

### ë¡œë”© ìƒíƒœ UI

#### ì´ˆê¸° ë¡œë”© (Step 1-3)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [ë¡œê³ ] ConnectMap                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚                                      â”‚
â”‚              [ìŠ¤í”¼ë„ˆ]                 â”‚
â”‚          ì§€ë„ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...        â”‚
â”‚                                      â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### GPS ë¡œë”© (Step 4-5)
- ì§€ë„ëŠ” í‘œì‹œë˜ì§€ë§Œ ì•½ê°„ íë¦¿í•˜ê²Œ (opacity: 0.6)
- ì¤‘ì•™ì— ì‘ì€ ë¡œë”© ìŠ¤í”¼ë„ˆ: "í˜„ì¬ ìœ„ì¹˜ë¥¼ ì°¾ëŠ” ì¤‘..."

### ì—ëŸ¬ ìƒíƒœ UI

#### ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [ë¡œê³ ] ConnectMap                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚          âš ï¸                          â”‚
â”‚   ì¸í„°ë„· ì—°ê²°ì„ í™•ì¸í•´ì£¼ì„¸ìš”.         â”‚
â”‚  ConnectMapì„ ì‚¬ìš©í•˜ë ¤ë©´              â”‚
â”‚  ì¸í„°ë„· ì—°ê²°ì´ í•„ìš”í•©ë‹ˆë‹¤.            â”‚
â”‚                                      â”‚
â”‚       [ë‹¤ì‹œ ì‹œë„]                    â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### í† ìŠ¤íŠ¸ ì•Œë¦¼
- **ìœ„ì¹˜**: í™”ë©´ ìƒë‹¨ ì¤‘ì•™, í—¤ë” ì•„ë˜ 80px
- **í¬ê¸°**: ìë™ (ë‚´ìš©ì— ë§ì¶¤, ìµœëŒ€ 400px)
- **ë°°ê²½ìƒ‰**: #333333 (80% opacity)
- **í…ìŠ¤íŠ¸ ìƒ‰ìƒ**: #FFFFFF
- **í‘œì‹œ ì‹œê°„**: 3ì´ˆ
- **ì• ë‹ˆë©”ì´ì…˜**: Fade in/out (0.3ì´ˆ)

---

## í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ (Test Scenarios)

### TS-1: ì •ìƒ í”Œë¡œìš° (ìœ„ì¹˜ ê¶Œí•œ í—ˆìš©)
**Given**: ì‚¬ìš©ìê°€ ìœ„ì¹˜ ê¶Œí•œì„ í—ˆìš©í•  ì¤€ë¹„ê°€ ë¨
**When**:
1. ì• í”Œë¦¬ì¼€ì´ì…˜ URLì— ì ‘ì†
2. ìœ„ì¹˜ ê¶Œí•œ íŒì—…ì—ì„œ "í—ˆìš©" ì„ íƒ

**Then**:
- ì§€ë„ê°€ ì‚¬ìš©ì í˜„ì¬ ìœ„ì¹˜ ì¤‘ì‹¬ìœ¼ë¡œ í‘œì‹œë¨
- ê²€ìƒ‰ì°½ì´ í™œì„±í™”ë¨
- í˜„ì¬ ìœ„ì¹˜ ë²„íŠ¼ì´ í‘œì‹œë¨
- ì „ì²´ ë¡œë”© ì‹œê°„ â‰¤ 5ì´ˆ

### TS-2: ì •ìƒ í”Œë¡œìš° (ìœ„ì¹˜ ê¶Œí•œ ê±°ë¶€)
**Given**: ì‚¬ìš©ìê°€ ìœ„ì¹˜ ê¶Œí•œì„ ê±°ë¶€í•  ì˜ˆì •
**When**:
1. ì• í”Œë¦¬ì¼€ì´ì…˜ URLì— ì ‘ì†
2. ìœ„ì¹˜ ê¶Œí•œ íŒì—…ì—ì„œ "ê±°ë¶€" ì„ íƒ

**Then**:
- ì§€ë„ê°€ ì„œìš¸ì‹œì²­ ì¤‘ì‹¬ìœ¼ë¡œ í‘œì‹œë¨
- ê²€ìƒ‰ì°½ì´ í™œì„±í™”ë¨
- í˜„ì¬ ìœ„ì¹˜ ë²„íŠ¼ì´ í‘œì‹œë¨
- í† ìŠ¤íŠ¸ ì•Œë¦¼ ì—†ìŒ (ì •ìƒ ë™ì‘)

### TS-3: GPS íƒ€ì„ì•„ì›ƒ
**Given**: GPS ì‹ í˜¸ê°€ ì•½í•œ í™˜ê²½ (ì˜ˆ: ì‹¤ë‚´)
**When**:
1. ì• í”Œë¦¬ì¼€ì´ì…˜ URLì— ì ‘ì†
2. ìœ„ì¹˜ ê¶Œí•œ í—ˆìš©
3. GPS ì¢Œí‘œ íšë“ 15ì´ˆ ì´ˆê³¼

**Then**:
- íƒ€ì„ì•„ì›ƒ í›„ ê¸°ë³¸ ìœ„ì¹˜ë¡œ í´ë°±
- í† ìŠ¤íŠ¸ ì•Œë¦¼ í‘œì‹œ: "í˜„ì¬ ìœ„ì¹˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ì–´ ê¸°ë³¸ ìœ„ì¹˜ë¡œ í‘œì‹œí•©ë‹ˆë‹¤."
- ê²€ìƒ‰ ê¸°ëŠ¥ì€ ì •ìƒ ì‘ë™

### TS-4: ë„¤ì´ë²„ ì§€ë„ SDK ë¡œë“œ ì‹¤íŒ¨
**Given**: ë„¤íŠ¸ì›Œí¬ ë¶ˆì•ˆì • ë˜ëŠ” API í‚¤ ì˜¤ë¥˜
**When**:
1. ì• í”Œë¦¬ì¼€ì´ì…˜ URLì— ì ‘ì†
2. ë„¤ì´ë²„ SDK ë¡œë“œ ì‹¤íŒ¨

**Then**:
- ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
- "ìƒˆë¡œê³ ì¹¨" ë²„íŠ¼ ì œê³µ
- ë²„íŠ¼ í´ë¦­ ì‹œ í˜ì´ì§€ ì¬ë¡œë“œ

### TS-5: ëª¨ë°”ì¼ í™˜ê²½ í…ŒìŠ¤íŠ¸
**Given**: iOS Safari ë¸Œë¼ìš°ì € ì‚¬ìš©
**When**:
1. ëª¨ë°”ì¼ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì ‘ì†
2. ìœ„ì¹˜ ê¶Œí•œ í—ˆìš©

**Then**:
- ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ ì •ìƒ í‘œì‹œ
- ê²€ìƒ‰ì°½ í¬ê¸° ì¡°ì •ë¨ (í™”ë©´ ë„ˆë¹„ì˜ 90%)
- í˜„ì¬ ìœ„ì¹˜ ë²„íŠ¼ í¬ê¸° 40x40px
- í„°ì¹˜ ì¸í„°ë™ì…˜ ì •ìƒ ì‘ë™

### TS-6: ì´ì „ ê¶Œí•œ ê±°ë¶€ ìƒíƒœ
**Given**: ì‚¬ìš©ìê°€ ì´ì „ì— ìœ„ì¹˜ ê¶Œí•œì„ ê±°ë¶€í•¨
**When**:
1. ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì¬ì ‘ì†

**Then**:
- ê¶Œí•œ íŒì—… ì—†ì´ ì¦‰ì‹œ ê¸°ë³¸ ìœ„ì¹˜ë¡œ ì§€ë„ í‘œì‹œ
- ì•ˆë‚´ í† ìŠ¤íŠ¸: "ìœ„ì¹˜ ê¶Œí•œì´ ì°¨ë‹¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤..."
- 3ì´ˆ í›„ í† ìŠ¤íŠ¸ ìë™ ì‚¬ë¼ì§

---

## ê¸°ìˆ  êµ¬í˜„ ê°€ì´ë“œ (Technical Implementation Guide)

### ê¸°ìˆ  ìŠ¤íƒ
- **Framework**: Next.js 14 (App Router)
- **Language**: TypeScript
- **State Management**: Zustand (ì „ì—­ ìƒíƒœ)
- **Styling**: TailwindCSS + shadcn-ui
- **Map SDK**: ë„¤ì´ë²„ ì§€ë„ JavaScript API v3
- **Geolocation**: Browser Geolocation API

### ì£¼ìš” ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

```
src/app/
  page.tsx                    # ë©”ì¸ í˜ì´ì§€ (Client Component)

src/features/map/
  components/
    MapContainer.tsx          # ë„¤ì´ë²„ ì§€ë„ ë˜í¼ ì»´í¬ë„ŒíŠ¸
    SearchBar.tsx             # ê²€ìƒ‰ì°½ ì»´í¬ë„ŒíŠ¸
    CurrentLocationButton.tsx # í˜„ì¬ ìœ„ì¹˜ ë²„íŠ¼
  hooks/
    useNaverMap.ts            # ë„¤ì´ë²„ ì§€ë„ ì´ˆê¸°í™” í›…
    useGeolocation.ts         # GPS ìœ„ì¹˜ íšë“ í›…
  lib/
    naverMapLoader.ts         # ë„¤ì´ë²„ SDK ë¡œë“œ ìœ í‹¸
  constants/
    mapConfig.ts              # ì§€ë„ ê¸°ë³¸ ì„¤ì • ìƒìˆ˜
```

### í™˜ê²½ ë³€ìˆ˜
```env
# .env.local
NEXT_PUBLIC_NAVER_MAP_CLIENT_ID=your_naver_map_client_id
```

### í•µì‹¬ ë¡œì§ ì˜ˆì‹œ

#### 1. useNaverMap í›…
```typescript
// src/features/map/hooks/useNaverMap.ts
import { useEffect, useState, useRef } from 'react';

interface NaverMapState {
  map: naver.maps.Map | null;
  isLoaded: boolean;
  error: string | null;
}

export const useNaverMap = (containerId: string, center: { lat: number; lng: number }, zoom: number) => {
  const [state, setState] = useState<NaverMapState>({
    map: null,
    isLoaded: false,
    error: null,
  });

  useEffect(() => {
    const initMap = async () => {
      try {
        if (!window.naver || !window.naver.maps) {
          throw new Error('ë„¤ì´ë²„ ì§€ë„ SDKë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        }

        const mapElement = document.getElementById(containerId);
        if (!mapElement) {
          throw new Error('ì§€ë„ ì»¨í…Œì´ë„ˆë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        }

        const map = new naver.maps.Map(containerId, {
          center: new naver.maps.LatLng(center.lat, center.lng),
          zoom,
          zoomControl: true,
          mapTypeControl: true,
        });

        setState({ map, isLoaded: true, error: null });
      } catch (error) {
        setState({ map: null, isLoaded: false, error: error.message });
      }
    };

    initMap();
  }, [containerId, center, zoom]);

  return state;
};
```

#### 2. useGeolocation í›…
```typescript
// src/features/map/hooks/useGeolocation.ts
import { useEffect, useState } from 'react';

interface GeolocationState {
  coords: { lat: number; lng: number } | null;
  loading: boolean;
  error: string | null;
}

const DEFAULT_COORDS = { lat: 37.5665, lng: 126.9780 }; // ì„œìš¸ì‹œì²­
const TIMEOUT = 15000; // 15ì´ˆ

export const useGeolocation = () => {
  const [state, setState] = useState<GeolocationState>({
    coords: null,
    loading: true,
    error: null,
  });

  useEffect(() => {
    if (!navigator.geolocation) {
      setState({ coords: DEFAULT_COORDS, loading: false, error: 'Geolocation not supported' });
      return;
    }

    const onSuccess = (position: GeolocationPosition) => {
      const { latitude, longitude, accuracy } = position.coords;

      if (accuracy > 5000) {
        console.warn(`Low GPS accuracy: ${accuracy}m`);
      }

      setState({
        coords: { lat: latitude, lng: longitude },
        loading: false,
        error: null,
      });
    };

    const onError = (error: GeolocationPositionError) => {
      console.error('GPS error:', error);
      setState({
        coords: DEFAULT_COORDS,
        loading: false,
        error: error.message,
      });
    };

    navigator.geolocation.getCurrentPosition(onSuccess, onError, {
      enableHighAccuracy: true,
      timeout: TIMEOUT,
      maximumAge: 0,
    });
  }, []);

  return state;
};
```

#### 3. ë©”ì¸ í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸
```typescript
// src/app/page.tsx
'use client';

import { MapContainer } from '@/features/map/components/MapContainer';
import { SearchBar } from '@/features/map/components/SearchBar';
import { useGeolocation } from '@/features/map/hooks/useGeolocation';

export default function HomePage() {
  const { coords, loading, error } = useGeolocation();

  if (loading) {
    return (
      <div className="flex h-screen items-center justify-center">
        <div className="text-center">
          <div className="spinner" />
          <p className="mt-4 text-gray-600">ì§€ë„ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
        </div>
      </div>
    );
  }

  return (
    <div className="relative h-screen">
      <header className="h-[60px] border-b bg-white px-4 flex items-center">
        <h1 className="text-xl font-bold">ConnectMap</h1>
      </header>

      <SearchBar />

      <MapContainer
        center={coords || { lat: 37.5665, lng: 126.9780 }}
        zoom={coords ? 15 : 12}
      />

      {error && (
        <div className="toast">
          í˜„ì¬ ìœ„ì¹˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ì–´ ê¸°ë³¸ ìœ„ì¹˜ë¡œ í‘œì‹œí•©ë‹ˆë‹¤.
        </div>
      )}
    </div>
  );
}
```

---

## ì°¸ê³  ìë£Œ (References)

### API ë¬¸ì„œ
- [ë„¤ì´ë²„ ë§µìŠ¤ API ê³µì‹ ë¬¸ì„œ](https://navermaps.github.io/maps.js.ncp/)
- [MDN Geolocation API](https://developer.mozilla.org/ko/docs/Web/API/Geolocation_API)

### ê´€ë ¨ Use Case
- UC-002: ì¥ì†Œ/ë§›ì§‘ ê²€ìƒ‰
- UC-003: ê²€ìƒ‰ ê²°ê³¼ì—ì„œ ì¥ì†Œ ì„ íƒ

### ë””ìì¸ ì°¸ê³ 
- ì¹´ì¹´ì˜¤ë§µ ì´ˆê¸° í™”ë©´
- ë„¤ì´ë²„ ì§€ë„ ì›¹ ë²„ì „
- Google Maps

---

## ë³€ê²½ ì´ë ¥ (Change Log)

| ë²„ì „ | ë‚ ì§œ | ì‘ì„±ì | ë³€ê²½ ë‚´ìš© |
|------|------|--------|-----------|
| 1.0 | 2025-10-22 | System | ì´ˆì•ˆ ì‘ì„± |

---

## ìŠ¹ì¸ (Approval)

- **Product Owner**: [ ]
- **Engineering Lead**: [ ]
- **QA Lead**: [ ]

---

**ë¬¸ì„œ ìƒíƒœ**: Draft
**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025-10-22
